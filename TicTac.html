<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>TicTac</title>

<script type="text/javascript">
<!--
window.onload = function()
{
	var ancho   = 100;
	var alto  = 100;
	var centroX = Math.floor(ancho / 2);
	var centroY = Math.floor(alto / 2);
	var lienzo  = document.getElementById('reloj');
	var contexto = lienzo.getContext('2d');

	setInterval(dibujarReloj, 1000);
	dibujarReloj();
	function dibujarReloj() {
		var fecha   = new Date();
		var hora   = fecha.getHours();
		var minuto = fecha.getMinutes();
		var segundo = fecha.getSeconds();
		var mp3Tic ='./mp3/ticking-clock_1-27477.mp3';

		// Un tic cada segundo durante 15 seg
		reproducirSonidoCadaNsegundos(mp3Tic, 15);

		// EspecificaciÃ³n del color
		contexto.strokeStyle = '#666666';

		contexto.clearRect(0, 0, lienzo.width, lienzo.height);

		// Dibujar el dial
		contexto.beginPath();
		contexto.arc(centroX, centroY, centroX - 1, 0, Math.PI*2, false);
		contexto.stroke();

		contexto.save();
		contexto.translate(ancho/2, alto/2);
		for(var i=0;i < 360; i+= 30){
			contexto.rotate( 30 * Math.PI / 180);
			contexto.beginPath();
			contexto.moveTo(0, centroY * 0.8);
			contexto.lineTo(0, centroY * 0.9);
			contexto.stroke();
		}
		contexto.translate(-ancho/2, -alto/2);
		contexto.restore();

		contexto.strokeStyle = '#333333';

		dibujarAguja(centroY * 0.5, hora * 30 + minuto / 60 * 30);
		dibujarAguja(centroY * 0.8, minuto * 6 + segundo / 60 * 6);

		contexto.strokeStyle = '#EE0000';

		dibujarAguja(centroY * 0.8, segundo * 6);
	}

	function dibujarAguja(longitud, angulo){
		contexto.save();
		contexto.translate(centroX, centroY);
		contexto.rotate( angulo * Math.PI / 180);
		contexto.beginPath();
		contexto.moveTo(0, 0);
		contexto.lineTo(0, -longitud);
		contexto.stroke();
		contexto.translate(-centroX, -centroY);
		contexto.restore();
	}
	function reproducirSonidoCadaNsegundos(rutaSonido, duracionSonido) {
		document.getElementById('reloj').addEventListener('click', function() {
			var sonido = new Audio(rutaSonido);
			sonido.currentTime = 0;
			sonido.play();
			setInterval(function() {
				sonido.currentTime = 0;
				sonido.play();
			}, duracionSonido * 1000); // Reproducir cada duracionSonido segundos
		}, { once: true });
	}
}
//-->
</script>
</head>
<body>
	<canvas id="reloj"></canvas>
</body>
</html>
